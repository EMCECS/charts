{{- if eq .Values.db.dbType "PostgresDB" }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-postgres-credentials
  namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
  password: {{ default "ChangeMe" .Values.db.postgres.password }}
  username: {{ default "kahm" .Values.db.postgres.userName }}
  dbname: {{ default "kahm" .Values.db.postgres.database }}
  port: "{{ default 5432 .Values.db.postgres.port }}"
{{- if .Values.db.postgresHostName }}
  hostname: {{ .Values.db.postgres.hostName }}
  credentials: host={{ .Values.db.postgres.hostName }} user={{ default "kahm" .Values.db.postgres.userName }} password={{ default "ChangeMe" .Values.db.postgres.password }} dbname={{ default "kahm" .Values.db.postgres.database }} port={{ default 5432 .Values.db.postgres.port }} sslmode=disable
{{- else }}
  hostname: {{ .Release.Name }}-postgressql-ha-pgpool
  credentials: host={{ .Release.Name }}-postgresql-ha-pgpool user={{ default "kahm" .Values.db.postgres.userName }} password={{ default "ChangeMe" .Values.db.postgres.password }} dbname={{ default "kahm" .Values.db.postgres.database }} port={{ default 5432 .Values.db.postgres.port }} sslmode=disable
{{- end }}
{{- end }}
