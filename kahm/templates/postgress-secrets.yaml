---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-postgres-credentials
  namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
{{- if .Values.db.postgresHostName }}
  hostname: {{ .Values.db.postgresHostName }}
  credentials: host={{ .Values.db.postgresHostName }} user={{ default "kahm" .Values.db.postgresUserName }} password={{ default "ChangeMe" .Values.db.postgresPassword }} dbname={{ default "kahm" .Values.db.postgresDatabaseName }} port={{ default 5432 .Values.db.postgresPort }} sslmode=disable
{{- else }}
  hostname: {{ .Release.Name }}-postgress
  credentials: host={{ .Release.Name }}-postgresql user={{ default "kahm" .Values.db.postgresUserName }} password={{ default "ChangeMe" .Values.db.postgresPassword }} dbname={{ default "kahm" .Values.db.postgresDatabaseName }} port={{ default 5432 .Values.db.postgresPort }} sslmode=disable
{{- end }}
  password: {{ default "ChangeMe" .Values.db.postgresPassword }}
  username: {{ default "kahm" .Values.db.postgresUserName }}
  dbname: {{ default "kahm" .Values.db.postgresDatabaseName }}
  port: "{{ default 5432 .Values.db.postgresPort }}"
