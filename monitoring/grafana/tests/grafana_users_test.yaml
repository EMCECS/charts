#
# Copyright Â© [2020] Dell Inc. or its subsidiaries.
# All Rights Reserved.
#
# This software contains the intellectual property of Dell Inc.
# or is licensed to Dell Inc. from third parties. Use of this
# software and the intellectual property contained therein is expressly
# limited to the terms and conditions of the License Agreement under which
# it is provided by or on behalf of Dell Inc. or its subsidiaries.
#
#

suite: test grafana-user-secret
templates:
  - grafana-user-secret.yaml
tests:
  - it: test config.users
    set:
      config.users:
        - username: emcmonitor
          password: ChangeMe
    asserts:
      - equal:
          path: metadata.name
          value: "RELEASE-NAME-grafana-view-all-user0"
      - equal:
          path: stringData.username
          value: "emcmonitor"
      - equal:
          path: stringData.password
          value: "ChangeMe"

  - it: test config.limitedUsers
    set:
      config.limitedUsers:
        - username: emcmonitor
          password: ChangeMe
    asserts:
      - equal:
          path: metadata.name
          value: "RELEASE-NAME-grafana-view-user0"
      - equal:
          path: stringData.username
          value: "emcmonitor"
      - equal:
          path: stringData.password
          value: "ChangeMe"
