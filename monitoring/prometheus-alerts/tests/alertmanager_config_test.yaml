#
# Copyright Â© [2020] Dell Inc. or its subsidiaries.
# All Rights Reserved.
#
# This software contains the intellectual property of Dell Inc.
# or is licensed to Dell Inc. from third parties. Use of this
# software and the intellectual property contained therein is expressly
# limited to the terms and conditions of the License Agreement under which
# it is provided by or on behalf of Dell Inc. or its subsidiaries.
#
#

suite: test alertmanager config
templates:
  - alertmanager_config.yaml
tests:
  - it: alertmanager config
    set:
      config.component: "comp1"
      config.alertmanager_repeat_interval: "24h"
    asserts:
      - matchRegex:
          path: data.alertmanager\.yaml
          pattern: "namespace: \"NAMESPACE\""
      - matchRegex:
          path: data.alertmanager\.yaml
          pattern: "application: \"RELEASE-NAME-prometheus-alerts\""
      - matchRegex:
          path: data.alertmanager\.yaml
          pattern: "component: \"comp1\""
      - matchRegex:
          path: data.alertmanager\.yaml
          pattern: "repeat_interval: 24h"
