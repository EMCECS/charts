#
# Copyright Â© [2020] Dell Inc. or its subsidiaries.
# All Rights Reserved.
#
# This software contains the intellectual property of Dell Inc.
# or is licensed to Dell Inc. from third parties. Use of this
# software and the intellectual property contained therein is expressly
# limited to the terms and conditions of the License Agreement under which
# it is provided by or on behalf of Dell Inc. or its subsidiaries.
#
#


suite: test configmap
templates:
  - configmap.yaml
tests:
  - it: logReceiver enabled
    set:
      logReceiver.enable: true
      logReceiver.host: "10.249.234.158"
      logReceiver.port: "9600"
    asserts:
      - matchRegex:
          path: data.rsyslog\.conf
          pattern: "Target=\"10.249.234.158\""
      - matchRegex:
          path: data.rsyslog\.conf
          pattern: 'Port=\"9600\"'
  - it: logReceiver disabled
    set:
      logReceiver.enable: false
    asserts:
      - notMatchRegex:
          path: data.rsyslog\.conf
          pattern: "# Send to logstash"