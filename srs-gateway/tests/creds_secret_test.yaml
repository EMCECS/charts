suite: test creds-secret
templates:
  - creds_secret.yaml
tests:
  - it: should create a credentials secret with defaults
    set:
      product: COSMIKDEBRIS
      gateway.hostname: 192.0.2.7
    asserts:
    - isKind:
        of: Secret
    - equal:
        path: metadata.name
        value: cosmikdebris-srs-creds-secret
    - equal:
        path: metadata.namespace
        value: default
  - it: should use customResourceName to create creds secret name
    set:
      product: COSMIKDEBRIS
      gateway.hostname: 192.0.2.7
      customResourceName: foo
    asserts:
    - isKind:
        of: Secret
    - equal:
        path: metadata.name
        value: foo-srs-creds-secret
    - equal:
        path: metadata.namespace
        value: default
  - it: should use credsSecretName if specified
    set:
      product: COSMIKDEBRIS
      gateway.hostname: 192.0.2.7
      customResourceName: foo
      credsSecretName: my-secret
    asserts:
    - isKind:
        of: Secret
    - equal:
        path: metadata.name
        value: my-secret
    - equal:
        path: metadata.namespace
        value: default
