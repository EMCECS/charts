---
# Source: objectscale-manager/templates/operator-rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: objectscale-operator
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-operator
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
---
# Source: objectscale-manager/templates/syslog.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: objectscale-syslog
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-syslog
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
data:
  rsyslog.conf: |
    module(load="imuxsock")    # local system logging support (e.g. via logger command)
    module(load="immark")      # --MARK-- message support
    module(load="imudp")       # UDP listener support
    module(load="imtcp")       # TCP listener support

    input(type="imudp" port="514")
    input(type="imtcp" port="514")

    *.info;mail.none;authpriv.none;cron.none                action(type="omfile" file="/var/log/messages")
    authpriv.*                                              action(type="omfile" file="/var/log/secure")
    mail.*                                                  action(type="omfile" file="/var/log/maillog")
    cron.*                                                  action(type="omfile" file="/var/log/cron")
    *.emerg                                                 action(type="omusrmsg" users="*")
    uucp,news.crit                                          action(type="omfile" file="/var/log/spooler")
    local7.*                                                action(type="omfile" file="/var/log/boot.log")
    $IncludeConfig /etc/rsyslog.d/*.conf
---
# Source: objectscale-manager/charts/graphql/templates/graphql-cert-bundle-cluster-resources.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: objectscale-manager-lychee-graphql-cert-bundle-cluster-resources
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: cluster-scoped-resources
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: graphql-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
rules:
  - apiGroups:
      - ""
    resources:
      - serviceaccounts
      - secrets
    verbs:
      - get
      - list
---
# Source: objectscale-manager/templates/objectscale-cluster-resources.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: objectscale-manager-lychee-objectscale-cluster-resources
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: cluster-scoped-resources
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
rules:
  - apiGroups:
      - storage.k8s.io
    resources:
      - storageclasses
      - storageclasslists
    verbs:
      - get
      - list
  - apiGroups:
      - certificates.k8s.io
    resources:
      - certificatesigningrequests
    verbs:
      - "*"
  - apiGroups:
      - certificates.k8s.io
    resources:
      - certificatesigningrequests/approval
    verbs:
      - update
  - apiGroups:
    - rbac.authorization.k8s.io
    resources:
    - clusterroles
    - clusterrolebindings
    verbs:
    - "*"
  - apiGroups:
      - ""
    resources:
      - nodes
      - clusterroles
    verbs:
      - "*"
---
# Source: objectscale-manager/templates/objectscale-cluster-resources.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: objectscale-manager-lychee-objectscale-cluster-resources
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-operator
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
subjects:
  - kind: ServiceAccount
    name: objectscale-operator
    namespace: lychee
  - kind: ServiceAccount
    name: objectscale-api
    namespace: lychee
roleRef:
  kind: ClusterRole
  name: objectscale-manager-lychee-objectscale-cluster-resources
  apiGroup: rbac.authorization.k8s.io
---
# Source: objectscale-manager/templates/objectscale-cluster-resources.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: objectscale-manager-lychee-graphql-cert-bundle-cluster-resources
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-operator
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
subjects:
  - kind: ServiceAccount
    name: objectscale-api
    namespace: lychee
roleRef:
  kind: ClusterRole
  name: objectscale-manager-lychee-graphql-cert-bundle-cluster-resources
  apiGroup: rbac.authorization.k8s.io
---
# Source: objectscale-manager/charts/graphql/templates/graphql-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: objectscale-graphql
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-graphql
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: graphql-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/component: objectscale-graphql
  ports:
    - port: 8080
      name: http
---
# Source: objectscale-manager/templates/syslog.yaml
apiVersion: v1
kind: Service
metadata:
  name: objectscale-syslog
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-syslog
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
spec:
  selector:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/component: objectscale-syslog
  ports:
  - name: tcp-syslog
    port: 514
    targetPort: 514
    protocol: TCP
  - name: udp-syslog
    port: 514
    targetPort: 514
    protocol: UDP
---
# Source: objectscale-manager/charts/graphql/templates/graphql-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: objectscale-graphql
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-graphql
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: graphql-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: objectscale-manager
      app.kubernetes.io/component: objectscale-graphql
  template:
    metadata:
      labels:
        app.kubernetes.io/name: objectscale-manager
        app.kubernetes.io/component: objectscale-graphql
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/instance: objectscale-manager
        app.kubernetes.io/part-of: objectscale-manager
        app.kubernetes.io/version: 0.33.0
        helm.sh/chart: graphql-0.33.0
        release: objectscale-manager
        operator: objectscale-operator
        product: objectscale
    spec:
      serviceAccountName: objectscale-api
      containers:
      - name: objectscale-graphql
        image: objectscale/ecs-flex-graphql:0.33.0
        imagePullPolicy:
        env:
        - name: OBJSTORE_AVAILABLE_VERSIONS
          value: "null"
        - name: GRAPHQL_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: WATCH_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: GLOBAL_REGISTRY
          value: objectscale
        - name: LICENSE_CHART_VERSION
          value: 1.2.0
        - name: SRSGATEWAY_CHART_VERSION
          value: 1.2.0
        - name: OPERATOR_NAME
          value: objectscale-operator
        - name: LOG_DIRECTION
          value: stdout
---
# Source: objectscale-manager/charts/helm-controller/templates/install-controller-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: objectscale-install-controller
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/component: objectscale-install-controller
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/version: 1.16.0
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: helm-controller-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: objectscale-manager
      app.kubernetes.io/component: objectscale-install-controller
  template:
    metadata:
      labels:
        app.kubernetes.io/name: objectscale-manager
        app.kubernetes.io/component: objectscale-install-controller
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/instance: objectscale-manager
        app.kubernetes.io/version: 1.16.0
        app.kubernetes.io/part-of: objectscale-manager
        helm.sh/chart: helm-controller-0.33.0
        release: objectscale-manager
        operator: objectscale-operator
        product: objectscale
    spec:
      serviceAccountName: objectscale-operator
      containers:
        - name: objectscale-install-controller
          image: objectscale/install-controller:0.33.0
          env:
            - name: OPERATOR_NAME
              value: objectscale-operator
            - name: WATCH_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          imagePullPolicy: IfNotPresent
---
# Source: objectscale-manager/templates/syslog.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: objectscale-syslog
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/component: objectscale-syslog
    app.kubernetes.io/part-of: objectscale-manager
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    operator: objectscale-operator
    product: objectscale
spec:
  serviceName: objectscale-syslog
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: objectscale-manager
      app.kubernetes.io/component: objectscale-syslog
  template:
    metadata:
      name: objectscale-syslog
      namespace: lychee
      labels:
        app.kubernetes.io/name: objectscale-manager
        app.kubernetes.io/instance: objectscale-manager
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/version: 0.33.0
        app.kubernetes.io/component: objectscale-syslog
        app.kubernetes.io/part-of: objectscale-manager
        helm.sh/chart: objectscale-manager-0.33.0
        release: objectscale-manager
        operator: objectscale-operator
        product: objectscale
    spec:
      volumes:
        - name: conf
          configMap:
            name: objectscale-syslog
      containers:
      - name: rsyslog
        image: objectscale/rsyslog:0.33.0
        imagePullPolicy: IfNotPresent
        livenessProbe:
          tcpSocket:
            port: 514
        env:
        - name: MODE
          value: SERVER
        ports:
        - name: incoming-logs
          containerPort: 514
        volumeMounts:
        - name: conf
          mountPath: /conf
        - name: objectscale-syslog-claim0
          mountPath: /var/log
  volumeClaimTemplates:
    - metadata:
        name: objectscale-syslog-claim0
        namespace: lychee
        labels:
          app.kubernetes.io/name: objectscale-manager
          app.kubernetes.io/instance: objectscale-manager
          app.kubernetes.io/managed-by: Helm
          app.kubernetes.io/version: 0.33.0
          app.kubernetes.io/component: objectscale-syslog
          app.kubernetes.io/part-of: objectscale-manager
          helm.sh/chart: objectscale-manager-0.33.0
          release: objectscale-manager
          operator: objectscale-operator
          product: objectscale
      spec:
        storageClassName: dellemc-objectscale-highly-available
        accessModes:
        - "ReadWriteOnce"
        resources:
          requests:
            storage: "50Gi"
---
# Source: objectscale-manager/templates/objectscale-manager-app.yaml
apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name: objectscale-manager
  namespace: lychee
  labels:
    app.kubernetes.io/name: objectscale-manager
    app.kubernetes.io/version: 0.33.0
    app.kubernetes.io/instance: objectscale-manager
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: objectscale-manager-0.33.0
    release: objectscale-manager
    product: objectscale
  annotations:
    com.dellemc.kahm.subscribed: "true"
    nautilus.dellemc.com/run-level: "10"
    nautilus.dellemc.com/chart-name: objectscale-manager
    nautilus.dellemc.com/chart-version: 0.33.0
    nautilus.dellemc.com/chart-values: "{\"affinity\":{},\"atlas\":{\"enabled\":false},\"createApplicationResource\":true,\"decks\":{\"licenseChartVersion\":\"1.2.0\",\"srsGatewayChartVersion\":\"1.2.0\",\"supportStore\":{\"service\":{\"name\":\"decks-support-store\",\"port\":7443}}},\"fluentbitAgent\":{\"image\":{\"repository\":\"fluent-bit\",\"tag\":\"0.28.0\"}},\"global\":{\"clusterResources\":true,\"enableHealthcheck\":false,\"monitoring\":{\"enabled\":false},\"platform\":\"VMware\",\"registry\":\"objectscale\",\"storageClassName\":\"dellemc-objectscale-highly-available\",\"watchAllNamespaces\":false},\"graphql\":{\"decks\":{\"licenseChartVersion\":\"1.2.0\",\"srsGatewayChartVersion\":\"1.2.0\",\"supportStore\":{\"service\":{\"name\":\"decks-support-store\",\"port\":7443}}},\"global\":{\"clusterResources\":true,\"enableHealthcheck\":false,\"monitoring\":{\"enabled\":false},\"platform\":\"VMware\",\"registry\":\"objectscale\",\"storageClassName\":\"dellemc-objectscale-highly-available\",\"watchAllNamespaces\":false},\"image\":{\"repository\":\"ecs-flex-graphql\"},\"logReceiver\":{\"image\":{\"repository\":\"rsyslog\"},\"persistence\":{\"accessMode\":\"ReadWriteOnce\",\"enabled\":true,\"size\":\"50Gi\"}},\"port\":8080,\"service\":{\"type\":\"ClusterIP\"},\"serviceName\":\"objectscale-graphql\",\"tag\":\"0.33.0\",\"withPlayground\":false},\"helm-controller\":{\"global\":{\"clusterResources\":true,\"enableHealthcheck\":false,\"monitoring\":{\"enabled\":false},\"platform\":\"VMware\",\"registry\":\"objectscale\",\"storageClassName\":\"dellemc-objectscale-highly-available\",\"watchAllNamespaces\":false},\"graphql\":{\"image\":{\"repository\":\"ecs-flex-graphql\"},\"port\":8080,\"service\":{\"type\":\"ClusterIP\"},\"serviceName\":\"objectscale-graphql\",\"withPlayground\":false},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"repository\":\"install-controller\"},\"tag\":\"0.33.0\",\"vSpherePlugin\":{\"enabled\":false,\"image\":{\"repository\":\"ecs-flex-vsphere-plugin\"},\"service\":{\"ports\":[{\"name\":\"http\",\"port\":4443,\"targetPort\":4443}],\"type\":\"LoadBalancer\"},\"tls\":{\"certificate\":{},\"certificateType\":\"SelfSigned\",\"signingRequest\":{\"keyAlgorithm\":\"RSA\",\"keySize\":2048,\"names\":{\"country\":\"USA\",\"locality\":\"Hopkinton\",\"organization\":\"Dell EMC\",\"organizationalUnit\":\"ObjectScale\",\"state\":\"MA\"}}}}},\"image\":{\"repository\":\"objectscale-operator\",\"tag\":\"0.33.0\"},\"influx\":{\"image\":{\"repository\":\"influxdb-operator\"},\"metricsPort\":6000,\"replicas\":1},\"installApplicationCRD\":true,\"installInfluxCRD\":true,\"installObjectStoreCRD\":true,\"installcontroller\":{\"enabled\":true,\"image\":{\"repository\":\"install-controller\"}},\"logReceiver\":{\"create\":true,\"image\":{\"repository\":\"rsyslog\"},\"persistence\":{\"accessMode\":\"ReadWriteOnce\",\"enabled\":true,\"size\":\"50Gi\",\"storageClassName\":\"dellemc-objectscale-highly-available\"},\"type\":\"Syslog\"},\"nodeSelector\":{},\"objectStoreAvailableVersions\":[\"0.33.0\"],\"pullPolicy\":\"IfNotPresent\",\"replicaCount\":1,\"resources\":{},\"sonobuoy\":{\"enabled\":false},\"tag\":\"0.33.0\",\"telemetry\":{\"image\":{\"repository\":\"telemetry-upload\"},\"schedule\":\"0 */12 * * *\"},\"tolerations\":[],\"vSpherePlugin\":{\"enabled\":false,\"image\":{\"repository\":\"ecs-flex-vsphere-plugin\"},\"service\":{\"ports\":[{\"name\":\"http\",\"port\":4443,\"targetPort\":4443}],\"type\":\"LoadBalancer\"},\"tls\":{\"certificate\":{},\"certificateType\":\"SelfSigned\",\"signingRequest\":{\"keyAlgorithm\":\"RSA\",\"keySize\":2048,\"names\":{\"country\":\"USA\",\"locality\":\"Hopkinton\",\"organization\":\"Dell EMC\",\"organizationalUnit\":\"ObjectScale\",\"state\":\"MA\"}}}},\"zookeeper\":{\"enabled\":false}}"
spec:
  assemblyPhase: Pending
  selector:
    matchLabels:
      app.kubernetes.io/name: objectscale-manager
  componentKinds:
    - group: core
      kind: Service
    - group: apps
      kind: Deployment
    - group: core
      kind: Pod
    - group: core
      kind: ReplicaSet
    - group: core
      kind: ConfigMap
    - group: core
      kind: ServiceAccount
    - group: rbac.authorization.k8s.io
      kind: Role
    - group: rbac.authorization.k8s.io
      kind: RoleBinding
    - group: batch
      kind: CronJob
    - group: batch
      kind: Job
    - group: core
      kind: Secret
  descriptor:
    type: objectscale-manager
    description: Cluster-level management of Dell EMC ObjecScale Object Stores
    keywords:
      - deos
      - objectscale
      - object store
      - flex
      - ecs
      - s3
    info:
      - "Copyright © 2019 Dell Inc. or its subsidiaries. All Rights Reserved."
